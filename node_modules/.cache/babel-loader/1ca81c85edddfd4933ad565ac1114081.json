{"ast":null,"code":"import _regeneratorRuntime from\"D:/CRYPTO-ANALYTICS WITH LOGIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/CRYPTO-ANALYTICS WITH LOGIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"D:/CRYPTO-ANALYTICS WITH LOGIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/CRYPTO-ANALYTICS WITH LOGIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/CRYPTO-ANALYTICS WITH LOGIN/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Drawer from\"@material-ui/core/Drawer\";import{Avatar,Button}from\"@material-ui/core\";import{CryptoState}from\"../../CryptoContext\";import{signOut}from\"firebase/auth\";import{auth,db}from\"../../firebase\";import{numberWithCommas}from\"../CoinsTable\";import{AiFillDelete}from\"react-icons/ai\";import{doc,setDoc}from\"firebase/firestore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles({container:{width:350,padding:25,height:\"100%\",display:\"flex\",flexDirection:\"column\",fontFamily:\"monospace\"},profile:{flex:1,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",gap:\"20px\",height:\"92%\"},logout:{height:\"8%\",width:\"100%\",backgroundColor:\"#baeb0b\",marginTop:20},picture:{width:200,height:200,cursor:\"pointer\",backgroundColor:\"#baeb0b\",objectFit:\"contain\"},watchlist:{flex:1,width:\"100%\",backgroundColor:\"grey\",borderRadius:10,padding:15,paddingTop:10,display:\"flex\",flexDirection:\"column\",alignItems:\"center\",gap:12,overflowY:\"scroll\"},coin:{padding:10,borderRadius:5,color:\"black\",width:\"100%\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",backgroundColor:\"#baeb0b\",boxShadow:\"0 0 3px black\"}});export default function UserSidebar(){var classes=useStyles();var _React$useState=React.useState({right:false}),_React$useState2=_slicedToArray(_React$useState,2),state=_React$useState2[0],setState=_React$useState2[1];var _CryptoState=CryptoState(),user=_CryptoState.user,setAlert=_CryptoState.setAlert,watchlist=_CryptoState.watchlist,coins=_CryptoState.coins,symbol=_CryptoState.symbol;console.log(watchlist,coins);var toggleDrawer=function toggleDrawer(anchor,open){return function(event){if(event.type===\"keydown\"&&(event.key===\"Tab\"||event.key===\"Shift\")){return;}setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},anchor,open)));};};var logOut=function logOut(){signOut(auth);setAlert({open:true,type:\"success\",message:\"You have been Logout Successfully !!Thanks for Visiting Us❤️\"});toggleDrawer();};var removeFromWatchlist=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(coin){var coinRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:coinRef=doc(db,\"watchlist\",user.uid);_context.prev=1;_context.next=4;return setDoc(coinRef,{coins:watchlist.filter(function(wish){return wish!==(coin===null||coin===void 0?void 0:coin.id);})},{merge:true});case 4:setAlert({open:true,message:\"\".concat(coin.name,\" Removed from the Watchlist !\"),type:\"success\"});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);setAlert({open:true,message:_context.t0.message,type:\"error\"});case 10:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function removeFromWatchlist(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:[\"right\"].map(function(anchor){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Avatar,{onClick:toggleDrawer(anchor,true),style:{height:38,width:38,marginLeft:15,cursor:\"pointer\",backgroundColor:\"#baeb0b\"},src:user.photoURL,alt:user.displayName||user.email}),/*#__PURE__*/_jsx(Drawer,{anchor:anchor,open:state[anchor],onClose:toggleDrawer(anchor,false),children:/*#__PURE__*/_jsxs(\"div\",{className:classes.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.picture,src:user.photoURL,alt:user.displayName||user.email}),/*#__PURE__*/_jsx(\"span\",{style:{width:\"100%\",fontSize:25,textAlign:\"center\",fontWeight:\"bolder\",wordWrap:\"break-word\"},children:user.displayName||user.email}),/*#__PURE__*/_jsxs(\"div\",{className:classes.watchlist,children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:15,textShadow:\"0 0 5px black\"},children:\"Watchlist\"}),coins.map(function(coin){if(watchlist.includes(coin.id))return/*#__PURE__*/_jsxs(\"div\",{className:classes.coin,children:[/*#__PURE__*/_jsx(\"span\",{children:coin.name}),/*#__PURE__*/_jsxs(\"span\",{style:{display:\"flex\",gap:8},children:[symbol,\" \",numberWithCommas(coin.current_price.toFixed(2)),/*#__PURE__*/_jsx(AiFillDelete,{style:{cursor:\"pointer\"},fontSize:\"16\",onClick:function onClick(){return removeFromWatchlist(coin);}})]})]});else return/*#__PURE__*/_jsx(_Fragment,{});})]})]}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:classes.logout,onClick:logOut,children:\"Log Out\"})]})})]},anchor);})});}","map":{"version":3,"sources":["D:/CRYPTO-ANALYTICS WITH LOGIN/src/components/Authentication/UserSidebar.js"],"names":["React","makeStyles","Drawer","Avatar","Button","CryptoState","signOut","auth","db","numberWithCommas","AiFillDelete","doc","setDoc","useStyles","container","width","padding","height","display","flexDirection","fontFamily","profile","flex","alignItems","gap","logout","backgroundColor","marginTop","picture","cursor","objectFit","watchlist","borderRadius","paddingTop","overflowY","coin","color","justifyContent","boxShadow","UserSidebar","classes","useState","right","state","setState","user","setAlert","coins","symbol","console","log","toggleDrawer","anchor","open","event","type","key","logOut","message","removeFromWatchlist","coinRef","uid","filter","wish","id","merge","name","map","marginLeft","photoURL","displayName","email","fontSize","textAlign","fontWeight","wordWrap","textShadow","includes","current_price","toFixed"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport { Avatar, Button } from \"@material-ui/core\";\nimport { CryptoState } from \"../../CryptoContext\";\nimport { signOut } from \"firebase/auth\";\nimport { auth, db } from \"../../firebase\";\nimport { numberWithCommas } from \"../CoinsTable\";\nimport { AiFillDelete } from \"react-icons/ai\";\nimport { doc, setDoc } from \"firebase/firestore\";\n\nconst useStyles = makeStyles({\n  container: {\n    width: 350,\n    padding: 25,\n    height: \"100%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    fontFamily: \"monospace\",\n  },\n  profile: {\n    flex: 1,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    gap: \"20px\",\n    height: \"92%\",\n  },\n  logout: {\n    height: \"8%\",\n    width: \"100%\",\n    backgroundColor: \"#baeb0b\",\n    marginTop: 20,\n  },\n  picture: {\n    width: 200,\n    height: 200,\n    cursor: \"pointer\",\n    backgroundColor: \"#baeb0b\",\n    objectFit: \"contain\",\n  },\n  watchlist: {\n    flex: 1,\n    width: \"100%\",\n    backgroundColor: \"grey\",\n    borderRadius: 10,\n    padding: 15,\n    paddingTop: 10,\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    gap: 12,\n    overflowY: \"scroll\",\n  },\n  coin: {\n    padding: 10,\n    borderRadius: 5,\n    color: \"black\",\n    width: \"100%\",\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"center\",\n    backgroundColor: \"#baeb0b\",\n    boxShadow: \"0 0 3px black\",\n  },\n});\n\nexport default function UserSidebar() {\n  const classes = useStyles();\n  const [state, setState] = React.useState({\n    right: false,\n  });\n  const { user, setAlert, watchlist, coins, symbol } = CryptoState();\n\n  console.log(watchlist, coins);\n\n  const toggleDrawer = (anchor, open) => (event) => {\n    if (\n      event.type === \"keydown\" &&\n      (event.key === \"Tab\" || event.key === \"Shift\")\n    ) {\n      return;\n    }\n\n    setState({ ...state, [anchor]: open });\n  };\n\n  const logOut = () => {\n    signOut(auth);\n    setAlert({\n      open: true,\n      type: \"success\",\n      message: \"You have been Logout Successfully !!Thanks for Visiting Us❤️\",\n    });\n\n    toggleDrawer();\n  };\n\n  const removeFromWatchlist = async (coin) => {\n    const coinRef = doc(db, \"watchlist\", user.uid);\n    try {\n      await setDoc(\n        coinRef,\n        { coins: watchlist.filter((wish) => wish !== coin?.id) },\n        { merge: true }\n      );\n\n      setAlert({\n        open: true,\n        message: `${coin.name} Removed from the Watchlist !`,\n        type: \"success\",\n      });\n    } catch (error) {\n      setAlert({\n        open: true,\n        message: error.message,\n        type: \"error\",\n      });\n    }\n  };\n\n  return (\n    <div>\n      {[\"right\"].map((anchor) => (\n        <React.Fragment key={anchor}>\n          <Avatar\n            onClick={toggleDrawer(anchor, true)}\n            style={{\n              height: 38,\n              width: 38,\n              marginLeft: 15,\n              cursor: \"pointer\",\n              backgroundColor: \"#baeb0b\",\n            }}\n            src={user.photoURL}\n            alt={user.displayName || user.email}\n          />\n          <Drawer\n            anchor={anchor}\n            open={state[anchor]}\n            onClose={toggleDrawer(anchor, false)}\n          >\n            <div className={classes.container}>\n              <div className={classes.profile}>\n                <Avatar\n                  className={classes.picture}\n                  src={user.photoURL}\n                  alt={user.displayName || user.email}\n                />\n                <span\n                  style={{\n                    width: \"100%\",\n                    fontSize: 25,\n                    textAlign: \"center\",\n                    fontWeight: \"bolder\",\n                    wordWrap: \"break-word\",\n                  }}\n                >\n                  {user.displayName || user.email}\n                </span>\n                <div className={classes.watchlist}>\n                  <span style={{ fontSize: 15, textShadow: \"0 0 5px black\" }}>\n                    Watchlist\n                  </span>\n                  {coins.map((coin) => {\n                    if (watchlist.includes(coin.id))\n                      return (\n                        <div className={classes.coin}>\n                          <span>{coin.name}</span>\n                          <span style={{ display: \"flex\", gap: 8 }}>\n                            {symbol}{\" \"}\n                            {numberWithCommas(coin.current_price.toFixed(2))}\n                            <AiFillDelete\n                              style={{ cursor: \"pointer\" }}\n                              fontSize=\"16\"\n                              onClick={() => removeFromWatchlist(coin)}\n                            />\n                          </span>\n                        </div>\n                      );\n                    else return <></>;\n                  })}\n                </div>\n              </div>\n              <Button\n                variant=\"contained\"\n                className={classes.logout}\n                onClick={logOut}\n              >\n                Log Out\n              </Button>\n            </div>\n          </Drawer>\n        </React.Fragment>\n      ))}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}