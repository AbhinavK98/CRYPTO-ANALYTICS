{"ast":null,"code":"import _regeneratorRuntime from\"D:/react-crypto-tracker-Firebase-Integration/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/react-crypto-tracker-Firebase-Integration/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/react-crypto-tracker-Firebase-Integration/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{createContext,useContext,useEffect,useState}from\"react\";import{onAuthStateChanged}from\"firebase/auth\";import{auth,db}from\"./firebase\";import axios from\"axios\";import{CoinList}from\"./config/api\";import{onSnapshot,doc}from\"firebase/firestore\";import{jsx as _jsx}from\"react/jsx-runtime\";var Crypto=/*#__PURE__*/createContext();var CryptoContext=function CryptoContext(_ref){var children=_ref.children;var _useState=useState(\"INR\"),_useState2=_slicedToArray(_useState,2),currency=_useState2[0],setCurrency=_useState2[1];var _useState3=useState(\"₹\"),_useState4=_slicedToArray(_useState3,2),symbol=_useState4[0],setSymbol=_useState4[1];var _useState5=useState({open:false,message:\"\",type:\"success\"}),_useState6=_slicedToArray(_useState5,2),alert=_useState6[0],setAlert=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),user=_useState8[0],setUser=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),coins=_useState10[0],setCoins=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),loading=_useState12[0],setLoading=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),watchlist=_useState14[0],setWatchlist=_useState14[1];useEffect(function(){if(user){var coinRef=doc(db,\"watchlist\",user===null||user===void 0?void 0:user.uid);var unsubscribe=onSnapshot(coinRef,function(coin){if(coin.exists()){console.log(coin.data().coins);setWatchlist(coin.data().coins);}else{console.log(\"No Items in Watchlist\");}});return function(){unsubscribe();};}},[user]);useEffect(function(){onAuthStateChanged(auth,function(user){if(user)setUser(user);else setUser(null);});},[]);var fetchCoins=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return axios.get(CoinList(currency));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setCoins(data);setLoading(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchCoins(){return _ref2.apply(this,arguments);};}();useEffect(function(){if(currency===\"INR\")setSymbol(\"₹\");else if(currency===\"USD\")setSymbol(\"$\");fetchCoins();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[currency]);return/*#__PURE__*/_jsx(Crypto.Provider,{value:{currency:currency,setCurrency:setCurrency,symbol:symbol,alert:alert,setAlert:setAlert,user:user,coins:coins,loading:loading,watchlist:watchlist},children:children});};export default CryptoContext;export var CryptoState=function CryptoState(){return useContext(Crypto);};","map":{"version":3,"sources":["D:/react-crypto-tracker-Firebase-Integration/src/CryptoContext.js"],"names":["createContext","useContext","useEffect","useState","onAuthStateChanged","auth","db","axios","CoinList","onSnapshot","doc","Crypto","CryptoContext","children","currency","setCurrency","symbol","setSymbol","open","message","type","alert","setAlert","user","setUser","coins","setCoins","loading","setLoading","watchlist","setWatchlist","coinRef","uid","unsubscribe","coin","exists","console","log","data","fetchCoins","get","CryptoState"],"mappings":"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","sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\nimport { onAuthStateChanged } from \"firebase/auth\";\nimport { auth, db } from \"./firebase\";\nimport axios from \"axios\";\nimport { CoinList } from \"./config/api\";\nimport { onSnapshot, doc } from \"firebase/firestore\";\n\nconst Crypto = createContext();\n\nconst CryptoContext = ({ children }) => {\n  const [currency, setCurrency] = useState(\"INR\");\n  const [symbol, setSymbol] = useState(\"₹\");\n  const [alert, setAlert] = useState({\n    open: false,\n    message: \"\",\n    type: \"success\",\n  });\n  const [user, setUser] = useState(null);\n  const [coins, setCoins] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [watchlist, setWatchlist] = useState([]);\n\n  useEffect(() => {\n    if (user) {\n      const coinRef = doc(db, \"watchlist\", user?.uid);\n      var unsubscribe = onSnapshot(coinRef, (coin) => {\n        if (coin.exists()) {\n          console.log(coin.data().coins);\n          setWatchlist(coin.data().coins);\n        } else {\n          console.log(\"No Items in Watchlist\");\n        }\n      });\n\n      return () => {\n        unsubscribe();\n      };\n    }\n  }, [user]);\n\n  useEffect(() => {\n    onAuthStateChanged(auth, (user) => {\n      if (user) setUser(user);\n      else setUser(null);\n  \n    });\n  }, []);\n\n  const fetchCoins = async () => {\n    setLoading(true);\n    const { data } = await axios.get(CoinList(currency));\n\n    setCoins(data);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    if (currency === \"INR\") setSymbol(\"₹\");\n    else if (currency === \"USD\") setSymbol(\"$\");\n\n    fetchCoins();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [currency]);\n\n  return (\n    <Crypto.Provider\n      value={{\n        currency,\n        setCurrency,\n        symbol,\n        alert,\n        setAlert,\n        user,\n        coins,\n        loading,\n        watchlist,\n      }}\n    >\n      {children}\n    </Crypto.Provider>\n  );\n};\n\nexport default CryptoContext;\n\nexport const CryptoState = () => {\n  return useContext(Crypto);\n};\n"]},"metadata":{},"sourceType":"module"}